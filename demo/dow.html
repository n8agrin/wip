<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>rene: Stock demo</title>

    <!-- Stylin -->
    <link rel="stylesheet" href="../lib/rene.css" type="text/css" media="screen" title="no title" charset="utf-8">

    <style type="text/css" media="screen">
        .chart {
            width: 600px;
            height: 400px;
        }

        #container {
            width: 900px;
            margin: auto;
        }

        #area-line .line path {
            stroke-width: 1px;
        }
    </style>

    <!-- Magic -->
    <script src="../vendor/d3.v2.js"></script>
    <script src="../lib/rene.js"></script>

</head>
<body>
    <section id="container">
        <div id="scatter" class="chart"></div>
        <div id="line" class="chart"></div>
        <div id="area" class="chart"></div>
        <div id="area-line" class="chart"></div>
    </section>
    <script type="text/javascript" charset="utf-8">
        var scatterChart,
            lineChart,
            areaChart,
            areaLineChart,
            quotes,
            cleaned;

        d3.json("dow.json", function(data) {
            quotes = data.query.results.quote;
            cleaned = quotes.map(function(d) {
                return [new Date(d.date), parseFloat(d.Close, 10)];
            }).reverse()

            // Scatter chart
            scatterChart = rene.chart()
                .addLayer(rene.scatter())
                .scale('x', d3.time.scale().domain([]))
                .scale('y', d3.scale.linear().domain([9000,9000]))
                .margin({ top: 20, right: 20, bottom: 20, left: 50 });

            scatterChart.xAxis().ticks(d3.time.months, 2);

            d3.select("#scatter")
                .datum([cleaned])
                .call(scatterChart);

            // Line chart
            lineChart = rene.chart()
                .addLayer(rene.line())
                .scale('x', d3.time.scale().domain([]))
                .scale('y', d3.scale.linear().domain([9000,9000]))
                .margin({ top: 20, right: 20, bottom: 20, left: 50 });

            lineChart.xAxis().ticks(d3.time.months, 2);

            d3.select("#line")
                .datum([cleaned])
                .call(lineChart);

            // Area chart
            areaChart = rene.chart()
                .addLayer(rene.area())
                .scale('x', d3.time.scale().domain([]))
                .scale('y', d3.scale.linear().domain([9000,9000]))
                .margin({ top: 20, right: 20, bottom: 20, left: 50 });

            areaChart.xAxis().ticks(d3.time.months, 2);

            d3.select("#area")
                .datum([cleaned])
                .call(areaChart);

            areaLineChart = rene.chart()
                .addLayer(rene.area())
                .addLayer(rene.line())
                .scale('x', d3.time.scale().domain([]))
                .scale('y', d3.scale.linear().domain([9000,9000]))
                .margin({ top: 20, right: 20, bottom: 20, left: 50 });

            areaLineChart.xAxis().ticks(d3.time.months, 2);
            
            // Area + line
            d3.select("#area-line")
                .datum([cleaned, cleaned])
                .call(areaLineChart);
        });
    </script>
</body>
</html>
<!-- data gathered from yahoo!

http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.historicaldata%20where%20symbol%20%3D%20%22%5EDJI%22%20and%20startDate%20%3D%20%222011-01-01%22%20and%20endDate%20%3D%20%22now%22&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=

-->